###### Basic app settings
NODE_ENV=production
LISTEN_HOST=0.0.0.0
LISTEN_PORT=8080
# BASE_PATH=
LOG_LEVEL=warn
# Force application timezone (affects pretty logs)
TZ=UTC

###### Database
DATABASE_URL=postgresql://media_user:changeme@localhost:5432/media_storage

###### S3 Storage (Garage)
S3_ENDPOINT=http://localhost:3900
S3_REGION=garage
S3_ACCESS_KEY_ID=your_access_key
S3_SECRET_ACCESS_KEY=your_secret_key
S3_BUCKET=media-files
S3_FORCE_PATH_STYLE=true

###### File Upload Limits
MAX_FILE_SIZE_MB=100
BLOCK_EXECUTABLE_UPLOADS=true
BLOCK_ARCHIVE_UPLOADS=true

###### Image Compression (Upload)
# Force compression for all uploads (ignores compress parameter in request)
FORCE_IMAGE_COMPRESSION_ENABLED=false

# Wait timeout for lazy optimization (milliseconds)
IMAGE_OPTIMIZATION_WAIT_TIMEOUT_MS=30000

# Default format: webp or avif
IMAGE_COMPRESSION_DEFAULT_FORMAT=webp
# Max dimensions
IMAGE_COMPRESSION_MAX_DIMENSION=3840
# Defaults for non-forced compression
IMAGE_COMPRESSION_STRIP_METADATA_DEFAULT=false
IMAGE_COMPRESSION_LOSSLESS_DEFAULT=false
# WebP settings
IMAGE_COMPRESSION_WEBP_QUALITY=80
IMAGE_COMPRESSION_WEBP_EFFORT=6
# AVIF settings (AVIF has better compression, so lower quality gives similar results)
IMAGE_COMPRESSION_AVIF_QUALITY=60
IMAGE_COMPRESSION_AVIF_EFFORT=6
IMAGE_COMPRESSION_AVIF_CHROMA_SUBSAMPLING=4:4:4

###### Thumbnails
THUMBNAIL_FORMAT=webp
THUMBNAIL_MAX_WIDTH=2048
THUMBNAIL_MAX_HEIGHT=2048
THUMBNAIL_CACHE_MAX_AGE_DAYS=365

# Thumbnail quality and effort (applied to selected format)
THUMBNAIL_QUALITY=80
THUMBNAIL_EFFORT=6

###### Cleanup Job
CLEANUP_ENABLED=true
CLEANUP_CRON=0 */6 * * *
# TTL for files with bad status (uploading/deleting/failed/missing)
CLEANUP_BAD_STATUS_TTL_DAYS=30
# TTL for unused thumbnails
CLEANUP_THUMBNAILS_TTL_DAYS=90
# Batch size for cleanup operations
CLEANUP_BATCH_SIZE=200